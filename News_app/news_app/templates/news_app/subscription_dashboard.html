{% extends 'news_app/base.html' %}
{% load static %}

{% block title %}My Subscriptions - News App{% endblock %}

<link rel="stylesheet" href="{% static 'news_app/subscriptions.css' %}">
{% block extra_css %}{% endblock %}

{% block content %}
    <div class="hero-section">
        <h1 class="hero-title">ğŸ“š My Subscriptions</h1>
        <p class="hero-subtitle">Manage your subscriptions to journalists and newsletters</p>
        
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-number">{{ subscribed_journalists.count }}</div>
                <div class="stat-label">Journalists</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ subscribed_newsletters.count }}</div>
                <div class="stat-label">Newsletters</div>
            </div>
        </div>
    </div>
    
    <!-- Journalists Section -->
    <div class="section-header">
        <h2 class="section-title">âœï¸ Journalists</h2>
        <a href="{% url 'journalist_list' %}" class="btn btn-secondary btn-sm">Browse More</a>
    </div>
    
    {% if subscribed_journalists %}
        <div class="subscription-grid">
            {% for journalist in subscribed_journalists %}
            <div class="subscription-card">
                <div class="subscription-header">
                    âœï¸
                </div>
                
                <div class="subscription-content">
                    <h3 class="subscription-name">{{ journalist.get_full_name|default:journalist.username }}</h3>
                    <p class="subscription-username">@{{ journalist.username }}</p>
                    
                    <a href="{% url 'web_unsubscribe_journalist' journalist.id %}" class="btn btn-danger btn-sm" style="width: 100%;">
                        Unsubscribe
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">âœï¸</div>
            <h3>No Journalist Subscriptions</h3>
            <p>You haven't subscribed to any journalists yet.</p>
            <a href="{% url 'journalist_list' %}" class="btn btn-primary">Browse Journalists</a>
        </div>
    {% endif %}
    
    <!-- Newsletters Section -->
    <div class="section-header" style="margin-top: 60px;">
        <h2 class="section-title">ğŸ“° Newsletters</h2>
        <a href="{% url 'newsletter_list' %}" class="btn btn-secondary btn-sm">Browse More</a>
    </div>
    
    {% if subscribed_newsletters %}
        <div class="subscription-grid">
            {% for newsletter in subscribed_newsletters %}
            <div class="subscription-card">
                <div class="subscription-header">
                    ğŸ“°
                </div>
                
                <div class="subscription-content">
                    <h3 class="subscription-name">{{ newsletter.title }}</h3>
                    <p class="subscription-username">By {{ newsletter.author.get_full_name|default:newsletter.author.username }}</p>
                    
                    <a href="{% url 'unsubscribe_newsletter' newsletter.id %}" class="btn btn-danger btn-sm" style="width: 100%;">
                        Unsubscribe
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">ğŸ“°</div>
            <h3>No Newsletter Subscriptions</h3>
            <p>You haven't subscribed to any newsletters yet.</p>
            <a href="{% url 'newsletter_list' %}" class="btn btn-success">Browse Newsletters</a>
        </div>
    {% endif %}
{% endblock %}
