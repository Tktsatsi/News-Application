{% extends "news_app/base.html" %}
{% load static %}

{% block title %}Articles - News App{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'news_app/articles.css' %}">
{% endblock %}

{% block content %}
    <div class="hero-section">
        <h1 class="hero-title">üì∞ Latest Articles</h1>
        <p class="hero-subtitle">Discover stories from our community of journalists</p>
    </div>

    {% if articles %}
        <div class="article-grid">
            {% for article in articles %}
            <div class="article-card" onclick="window.location.href='{% url 'article_detail' article.pk %}'">
                {% if article.image %}
                <div class="article-image">
                    <img src="{{ article.image.url }}" alt="{{ article.title }}">
                </div>
                {% else %}
                <div class="article-placeholder">
                    üì∞
                </div>
                {% endif %}
                
                <div class="article-content">
                    <h3 class="article-title">{{ article.title }}</h3>
                    
                    <div class="article-meta">
                        <div class="meta-item">
                            <span>By</span>
                            <span class="article-author">{{ article.author.get_full_name|default:article.author.username }}</span>
                        </div>
                        <div class="meta-item">
                            üìÖ {{ article.published_date|date:"M d, Y" }}
                        </div>
                        {% if article.publisher %}
                        <div class="meta-item">
                            üè¢ {{ article.publisher.name }}
                        </div>
                        {% endif %}
                    </div>
                    
                    {% if article.summary %}
                    <p class="article-summary">{{ article.summary }}</p>
                    {% else %}
                    <p class="article-summary">{{ article.content|truncatewords:30 }}</p>
                    {% endif %}
                    
                    <a href="{% url 'article_detail' article.pk %}" class="read-more">
                        Read More ‚Üí
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        
        {% if is_paginated %}
        <div class="pagination">
            {% if page_obj.has_previous %}
                <a href="?page=1" class="btn btn-secondary btn-sm">First</a>
                <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-secondary btn-sm">Previous</a>
            {% endif %}
            
            <span class="page-info">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
            </span>
            
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}" class="btn btn-secondary btn-sm">Next</a>
                <a href="?page={{ page_obj.paginator.num_pages }}" class="btn btn-secondary btn-sm">Last</a>
            {% endif %}
        </div>
        {% endif %}
    {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">üì∞</div>
            <h3>No Articles Yet</h3>
            <p>Check back soon for new articles!</p>
        </div>
    {% endif %}
{% endblock %}
